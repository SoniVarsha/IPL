let teamData = [
  {
    id: 1,
    fullName: "Chennai Super Kings",
    key: "CSK",
    championshipsWon: 3,
    teamIcon:
      "https://upload.wikimedia.org/wikipedia/en/thumb/2/2b/Chennai_Super_Kings_Logo.svg/1200px-Chennai_Super_Kings_Logo.svg.png",
    players: [
      {
        id: "1",
        name: "Suresh Raina",
        photos:
          "https://ih1.redbubble.net/image.204315893.5307/papergc,500x,w,f8f8f8-pad,750x1000,f8f8f8.u2.jpg",
        description:
          "Suresh Raina is a former Indian international cricketer. An aggressive left-handed middle-order batsman and an occasional off-spin bowler, he is also regarded as one of the best fielders in world cricket.",
        team: "CSK",
        role: "Batsman",
        playingStaus: "Playing",
        price: "11 Crore",
      },
      {
        id: "2",
        name: "Ravindra Jadeja",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?          q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "Ravindrasinh Anirudhsinh Jadeja, commonly known as Ravindra Jadeja, is an Indian international cricketer. He is an all-rounder, who bats left-handed in the middle-order and bowls left-arm orthodox spin.",
        team: "CSK",
        role: "All-Rounder",
        playingStaus: "Playing",
        price: "7 crores",
      },
      {
        id: "3",
        name: "MS Dhoni",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "Mahendra Singh Dhoni, is a former Indian international cricketer who captained the Indian national team in limited-overs formats from 2007 to 2017 and in Test cricket from 2008 to 2014",
        team: "CSK",
        role: "Wicket-Keeper",
        playingStaus: "Playing",
        price: "15 Crores",
      }
    ],
  },
  {
    id: 2,
    fullName: "Delhi Capitals",
    key: "DC",
    championshipsWon: 0,
    teamIcon:
      "https://i.pinimg.com/originals/c8/13/2b/c8132b1023b2fda3b67bf4b714d5ceb4.jpg",
    players: [
      {
        id: "1",
        name: "Shikhar Dhawan",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true ",
        description:
          "Shikhar Dhawan is an Indian international cricketer. A left-handed opening batsman and an occasional right-arm off break bowler, he plays for Delhi in first-class cricket and Delhi Capitals in the IPL. He played for the Indian Under-17 and Under-19 teams before making his first-class debut for Delhi in November 2004. ",
        team: "DC",
        role: "Batsman",
        playingStaus: "Playing",
        price: "5.20 crore",
      },
      {
        id: "2",
        name: "Prithvi Shaw ",
        photos:
          "https://ih1.redbubble.net/image.204315893.5307/papergc,500x,w,f8f8f8-pad,750x1000,f8f8f8.u2.jpg",
        description:
          "Prithvi Pankaj Shaw is an Indian professional cricketer and former India national under-19 cricket team captain. He plays for Mumbai in domestic cricket and Delhi Capitals in the Indian Premier League. ",
        team: "DC",
        role: "Batsman",
        playingStaus: "Playing",
        price: "1.20 crore",
      },
      {
        id: "3",
        name: "Ajinkya Rahane",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "Ajinkya Madhukar Rahane is an Indian international cricketer. He is currently the vice-captain of the Indian cricket team in Test cricket. He plays primarily as a middle-order batsman in the Test format and as a top-order batsman in white-ball forms of the game.",
        team: "DC",
        role: "Batsman",
        playingStaus: "Playing",
        price: "5.25 crore",
      },
      {
        id: "4",
        name: "Shimron Hetmyer",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?          q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "Shimron Odilon Hetmyer is a Guyanese cricketer who plays for the West Indies cricket team. He was part of the West Indies' squad for the 2014 ICC Under-19 Cricket World Cup. In December 2015 he was named as the captain of the West Indies squad for the 2016 Under-19 Cricket World Cup.",
        team: "DC",
        role: "Batsman",
        playingStaus: "Playing",
        price: "3 crore",
      },
      {
        id: "5",
        name: "Axar Patel",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "Axar Rajeshbhai Patel also spelled as Akshar Patel, is an Indian international cricketer. He plays for Gujarat in domestic cricket and for the Delhi Capitals in the Indian Premiere League. He is an all-rounder who plays as a left-handed batsman and slow left-arm orthodox bowler.",
        team: "DC",
        role: "All-Rounder",
        playingStaus: "Playing",
        price: "4.4 crore",
      },
    ],
  },
  {
    id: 3,
    fullName: "Kolkata Night Riders",
    key: "KKR",
    championshipsWon: 2,
    teamIcon:
      "https://upload.wikimedia.org/wikipedia/en/thumb/4/4c/Kolkata_Knight_Riders_Logo.svg/1200px-Kolkata_Knight_Riders_Logo.svg.png",
    players: [
      {
        id: "1",
        name: "Eoin Morgan",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "Eoin Joseph Gerard Morgan CBE (born 10 September 1986) is an Irish-born cricketer who captains the England cricket team in limited overs cricket, Kolkata Knight Riders in the Indian Premier League and Middlesex in the Vitality T20 Blast.",
        team: "KKR",
        role: "Batsman",
        playingStaus: "Playing",
        price: "5.25 crore",
      },
      {
        id: "2",
        name: "Nitish Rana",
        photos:
          "https://ih1.redbubble.net/image.204315893.5307/papergc,500x,w,f8f8f8-pad,750x1000,f8f8f8.u2.jpg",
        description:
          "Nitish Rana (born 27 December 1993) is an Indian cricketer who plays for Delhi in domestic cricket and Kolkata Knight Riders in the Indian Premier League.",
        team: "KKR",
        role: "Batsman",
        playingStaus: "Playing",
        price: "5.5 crore",
      },
      {
        id: "3",
        name: "Shubman Gill",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "Shubman Gill (born 8 September 1999) is an Indian international cricketer who plays for Punjab in domestic cricket and for the Kolkata Knight Riders in the Indian Premier League (IPL) as a right-handed opening batsman.",
        team: "KKR",
        role: "Batsman",
        playingStaus: "Playing",
        price: "2 crore",
      },
      {
        id: "4",
        name: "Gurkeerat Singh Mann",
        photos:
          "https://ih1.redbubble.net/image.204315893.5307/papergc,500x,w,f8f8f8-pad,750x1000,f8f8f8.u2.jpg",
        description:
          " (born 29 June 1990) is an Indian professional cricketer who plays for Punjab in domestic cricket.",
        team: "KKR",
        role: "Batsman",
        playingStaus: "Playing",
        price: "1 crore",
      },
      
    ],
  },
  {
    id: 4,
    fullName: "Mumbai Indians",
    key: "MI",
    championshipsWon: 5,
    teamIcon:
      "https://i.pinimg.com/originals/28/09/a8/2809a841bb08827603ccac5c6aee8b33.png",
    players: [
      {
        id: "1",
        name: "Rohit Sharma",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true ",
        description:
          "Rohit Gurunath Sharma is an Indian international cricketer who plays for Mumbai in domestic cricket and captains Mumbai Indians in the Indian Premier League.",
        team: "MI",
        role: "Batsman",
        playingStaus: "Playing",
        price: "15 crore",
      },
      {
        id: "2",
        name: "SuryaKumar Yadav",
        photos:
          "https://ih1.redbubble.net/image.204315893.5307/papergc,500x,w,f8f8f8-pad,750x1000,f8f8f8.u2.jpg",
        description:
          "Suryakumar Yadav is an Indian cricketer who plays for Mumbai and Mumbai Indians in domestic cricket.",
        team: "MI",
        role: "Batsman",
        playingStaus: "Playing",
        price: "3.2 crore",
      },
      {
        id: "3",
        name: "Ishan Kishan",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true         ",
        description:
          "Ishan Pranav Kumar Pandey Kishan is an Indian cricketer from Bihar. He made his international debut for the India cricket team in March 2021.",
        team: "MI",
        role: "Wicket-Keeper",
        playingStaus: "Playing",
        price: "6.2 crore",
      },
      {
        id: "4",
        name: "Hardik Pandya",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "JHardik Himanshu Pandya is an Indian international cricketer who plays for Baroda in domestic cricket and Mumbai Indians in the Indian Premier League.",
        team: "MI",
        role: "Allrounder",
        playingStaus: "Playing",
        price: "11 crore",
      },
  
    ],
  },
  {
    id: 5,
    fullName: "Punjab Kings",
    key: "PBKS",
    championshipsWon: 0,
    teamIcon:
      "https://logotaglines.com/wp-content/uploads/2016/07/punjab-kings-logo.jpeg",
    players: [
      {
        id: "1",
        name: "Chris Gayle",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "(born 21 September 1979) is a Jamaican cricketer who plays international cricket for the West Indies. Gayle captained the West Indies Test side from 2007 to 2010.",
        team: "PBKS",
        role: "Batsman",
        playingStaus: "Playing",
        price: "4.20 crore",
      },
      {
        id: "2",
        name: "Nicholas Pooran",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "( /ˌpuːrɑːn/; born 2 October 1995) is a Trinidadian cricketer who plays for the West Indies cricket team in international cricket and for the Trinidad and Tobago in West Indian domestic matches.",
        team: "PBKS",
        role: "Batsman",
        playingStaus: "Playing",
        price: "4 crore",
      },
      {
        id: "3",
        name: "Mayank Agarwal",
        photos:
          "https://ih1.redbubble.net/image.204315893.5307/papergc,500x,w,f8f8f8-pad,750x1000,f8f8f8.u2.jpg",
        description:
          "(born 16 February 1991) is an Indian cricketer who plays as a right-handed top-order batsman. ",
        team: "PBKS",
        role: "Batsman",
        playingStaus: "Playing",
        price: "1 crore",
      },
      {
        id: "4",
        name: "Sarfaraz Khan",
        photos:
          "https://ss.thgim.com/cricket/ipl/article26686635.ece/alternates/FREE_380/SARFARAZAFP",
        description:
          "Sarfaraz Khan is a young 17-year old cricketer, who plays for Mumbai in the Ranji Trophy. He was also a part of the Indian under-19 team that played in the 2014.",
        team: "PBKS",
        role: "Batsman",
        playingStaus: "Playing",
        price: "25lakhs",
      },
      {
        id: "5",
        name: "KL Rahul",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "Kannur Lokesh Rahul (Kannada: ಕೆ.ಎಲ್.ರಾಹುಲ್) (born 18 April 1992) is an Indian international cricketer who plays for Karnataka in domestic cricket and captains Punjab Kings in the Indian Premier League.",
        team: "PBKS",
        role: "Wicket Keeper",
        playingStaus: "Playing",
        price: "11 crores",
      },
      {
        id: "6",
        name: "Prabhsimran Singh",
        photos:
          "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "Prabhsimran Singh born 10 August 2000) is an Indian cricketer who plays for Punjab Kings in the Indian Premier League (IPL).",
        team: "PBKS",
        role: "All-Rounder",
        playingStaus: "Playing",
        price: "55 lakhs",
      },
      {
        id: "7",
        name: "Mandeep Singh",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "(born 18 December 1991) is an Indian cricketer. He plays for Punjab in the top-flight of Indian cricket.",
        team: "PBKS",
        role: "All-Rounder",
        playingStaus: "Playing",
        price: "20 lakhs",
        championship: 1,
      },
    ],
  },
  {
    id: 6,
    fullName: "Rajasthan Royals",
    key: "RR",
    championshipsWon: 1,
    teamIcon: "https://static.toiimg.com/thumb/msid-77990255,imgsize-66937,width-400,resizemode-4/77990255.jpg",
    players: [
      {
        id: "1",
        name: "Jos Buttler",
        photos:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdmVk7Arg9V7AqIPVhmOujR4BAPHQ7mdUFWA&usqp=CAU",
        description:
          "Joseph Charles Buttler MBE is an English international cricketer and current vice-captain of the England cricket team and Rajasthan Royals in limited overs cricket and the IPL respectively. He is considered by some to be England's best white ball batsman of all time. ",
        team: "RR",
        role: "Batsman",
        playingStaus: "Playing",
        price: "4.40 crore",
      },
      {
        id: "2 ",
        name: "Manan Vohra",
        photos: "https://st2.depositphotos.com/2557937/6268/v/380/depositphotos_62685767-stock-illustration-colorful-cricket-player-silhouette.jpg?forcejpeg=true",
        description:
          "Manan Vohra is an Indian cricketer. He has played for the India Under-19 cricket team. He is a resident of Chandigarh. He currently plays for Rajasthan Royals in the Indian Premier League.",
        team: "RR",
        role: "Batsman",
        playingStaus: "Playing",
        price: "20 Lakhs ",
      },

    ],
  },
];


$(document).ready(function(){

  $('.owl-carousel').owlCarousel({
      loop:true,
      margin:10,
      nav:false,
      autoplay:true,
      autoplayTimeout:5000,
      responsive:{
          0:{
              items:1
          },
          600:{
              items:1
          },
          1000:{
              items:1
          }
      }
  })

  $("#btn-players").click(function(){
      $("#aside-1").css({
          display: "block",
          width: "40%",
      });
  })

  $("#btn-teams").click(function(){
      $("#aside-2").css({
          display: "block",
          width: "40%",
      });
  })

  $(".close").click(function(){
      $("#aside-1").css({
          display: "none",
      });
      $("#aside-2").css({
          display: "none",
      });
  })

  if(localStorage.getItem("teamData") == null){
      localStorage.setItem("teamData",JSON.stringify(teamData));
  }


  function createTeam(data){
      var card =$("<div>").attr({
          class : "card-team",
      })
      var img1 = $("<img>").attr({
          class : "img-team",
          src : data.teamIcon
      })
      var div1 = $("<div>").attr({
          class : "div-team",
      })
      var name1 = $("<p>").html(`<b>Team: </b> ${data.fullName}--(${data.key})`).attr({
          class : "name-team"
      })
      var cham1 = $("<p>").html(`<b>Championship Won : </b> ${data.championshipsWon}`).attr({
          class : "cham-team"
      })
      var play1 = $("<p>").html(`<b> No. Of Players: </b> ${data.players.length}`).attr({
          class : "play-team"
      })
      $(div1).append(name1,cham1,play1);
      $(card).append(img1,div1)
      card.click(function() {
          localStorage.setItem("team",JSON.stringify(data));
          window.location = "./team.html";
      })

      $("#teams-1").append(card);
  }


  var data = JSON.parse(localStorage.getItem("teamData"));

  for(var i = 0; i<data.length ; i++){
      createTeam(data[i]);
  }


  $("#sub-1").click(function(e) {
    e.preventDefault();
    var data = JSON.parse(localStorage.getItem("teamData"));
    let n1 = $("#n1").val();//name
    let n2 = $("#n2").val();//link
    let n3 = $("#n3").val();//des
    let n4 = $("#n4").val().toUpperCase();//team
    let n5 = $("#n5").val();//role
    let n6 = $("#n6").val();//status 
    let n7 = $("#n7").val();//price
    for( let i = 0; i<=data.length; i++ ){
      if(data[i].key == n4){   
         var obj = {
            id: data[i].players.length + 1,   
            name : n1,
            photos : n2,
            description : n3,
            team : n4,
            role : n5,
            playingStaus: n6,
            price : n7 + " crores"
         }
         data[i].players.push(obj);
         localStorage.setItem("teamData",JSON.stringify(data));
         alert("Player Created !!");
         location.reload();
      }
      if(i == data.length){
        alert("team not found !!! --- try again or create the team first !!!");
      }
    }
  })

  $("#sub-2").click(function(e) {
    e.preventDefault();
    var data = JSON.parse(localStorage.getItem("teamData"));
    let n8 = $("#n8").val();//fnam
    let n9 = $("#n9").val().toUpperCase();//key
    let n10 = $("#n10").val();//cham
    let n11 = $("#n11").val().toUpperCase();//logo
    var obj = {
        id: data.length + 1,
        fullName : n8,
        key : n9,
        championshipsWon: n10,
        teamIcon : n11,
        players : [],
      }
      data.push(obj);
      localStorage.setItem("teamData",JSON.stringify(data));
      alert("Team Created !!");
      location.reload();
  })

  let search = document.getElementById("search-text");
  
  search.oninput = function(){
    if(search.value == ""){
      $(".search-drop").css("display", "none");
      $(".player-drop").css("display", "none");
    }
      
    

      let j = search.value.length;
      let data = JSON.parse(localStorage.getItem("teamData"));
    function createDiv(data){
      let div1 = $("<div>").attr({
        class: "search-drop"
      })
      div1.css("display", "flex")
      let img1 = $("<img>").attr({
        src : data.teamIcon,
        class : "drop-icon"
      })
      let name1 = $("<p>").html(`${data.fullName}`).attr({
        class : "drop-text"
      })
      $(div1).append(img1,name1);
      $(div1).click(function(){
        localStorage.setItem("team", JSON.stringify(data));
        window.location = "./team.html"
      })

      $("#search-box").append(div1);
    }

      let player = JSON.parse(localStorage.getItem("search"));
      for(let i = 0; i < player.length; i++){
        if(data.key == player[i].team){
          let div2 = $("<div>").attr({
            class: "player-drop"
          })
          div2.css("display", "flex")
          let img2 = $("<img>").attr({
            src : player[i].photos,
            class : "drop-icon"
          })
          let name2 = $("<p>").html(`${player[i].name}`).attr({
            class : "drop-text"
          })
          $(div2).append(img2,name2);
          $(div2).click(function(){
            localStorage.setItem("player", JSON.stringify(player[i]));
            window.location = "./player.html"
          })
        $(".search-drop").append(div2);
        }
      
    }

      for(let i = 0; i <data.length; i++) {
        if(data[i].fullName.toUpperCase() == search.value.toUpperCase() ){
          
          createDiv(data[i]);
        }
        else if(data[i].key.toUpperCase() == search.value.toUpperCase()){
          // console.log(search.value)
          // console.log(data)
          createDiv(data[i]);
        }
      }


  let teamPlayerName;
      for(let i = 0; i <data.length; i++) {
        teamPlayerName = data[i].players

       console.log((teamPlayerName))

        for(let k=0; k<teamPlayerName.length;k++){
          console.log(teamPlayerName[k])
        let searching = search.value
        if(teamPlayerName[k].name.toUpperCase() == searching.toUpperCase()){
          createDiv(data[i]);
        }
              }
  }

  }

});



  
  